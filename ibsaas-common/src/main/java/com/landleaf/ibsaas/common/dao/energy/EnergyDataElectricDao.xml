<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC
        "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.landleaf.ibsaas.common.dao.energy.EnergyDataElectricDao">


    <select id="getRecentlyData" resultType="com.landleaf.ibsaas.common.domain.energy.EnergyDataElectric">
        SELECT
        tede.node_id,
        tede.electric_data_time,
        tede.electric_data_value,
        tede.electric_data_increase_value
        FROM
        t_energy_data_electric tede,
        (SELECT node_id, MAX(electric_data_time) AS electric_data_time FROM t_energy_data_electric WHERE is_active=1 GROUP BY node_id) t
        WHERE tede.is_active=1
        AND tede.node_id=t.node_id
        AND tede.electric_data_time=t.electric_data_time
    </select>
</mapper>
